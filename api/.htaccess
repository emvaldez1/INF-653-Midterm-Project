# Enable rewrite engine
RewriteEngine On

# Serve existing files directly
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# Route requests starting with api/ to the appropriate index files
RewriteCond %{REQUEST_URI} ^/api/
RewriteRule ^api/(.+)/?$ /api/$1/index.php [L,QSA]

# If no file or directory matched, route everything to index.php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^.*$ index.php [L,QSA]
